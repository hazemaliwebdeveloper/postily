# ============================================================================
# POZMIXAL - Local Development Environment Configuration
# ============================================================================
# 
# This file contains all environment variables needed to run Pozmixal locally.
# CRITICAL: This file MUST be present as .env or .env.local in the root directory
#
# IMPORTANT: 
# - This file should NOT be committed to version control
# - Update FRONTEND_URL and NEXT_PUBLIC_BACKEND_URL to match your setup
# - Change JWT_SECRET to a secure random string
# - Ensure DATABASE_URL and REDIS_URL point to running services
#
# ============================================================================

# ============================================================================
# CRITICAL: Node Environment
# ============================================================================
NODE_ENV="development"

# ============================================================================
# CRITICAL: Database Configuration
# ============================================================================
# PostgreSQL connection string - MUST be accessible and running

# Format: postgresql://username:password@host:port/database
DATABASE_URL="postgresql://pozmixal-local:pozmixal-local-pwd@localhost:5432/pozmixal-db-local"

# Direct database URL (same as DATABASE_URL for local development)
DATABASE_DIRECT_URL="postgresql://pozmixal-local:pozmixal-local-pwd@localhost:5432/pozmixal-db-local"

# ============================================================================
# CRITICAL: Redis Configuration
# ============================================================================
# Redis connection string - MUST be accessible and running
# If not set, the application will attempt to use MockRedis

# Format: redis://host:port or redis://:password@host:port
REDIS_URL="redis://localhost:6379"

# ============================================================================
# CRITICAL: JWT & Security
# ============================================================================
# JWT secret for signing tokens - must be strong and unique
# Generated from: openssl rand -base64 32

JWT_SECRET="your-super-secret-jwt-key-change-this-in-production-min-32-chars"

# ============================================================================
# CRITICAL: URL Configuration
# ============================================================================
# These URLs MUST be configured correctly or you will get CORS and connection errors
# Mismatch in these URLs is the #1 cause of "connection blocked" errors

# Frontend URL - The URL you type in your browser
# Examples:
# - http://localhost:4200 (local machine, default)
# - http://192.168.1.100:4200 (different machine on network)
# - http://yourdomain.local:4200 (custom domain)
# MUST match EXACTLY what's in your browser address bar
FRONTEND_URL="http://localhost:4200"

# Backend URLs - Must be accessible from the frontend

# Used by frontend JavaScript to make API requests
# Usually: http://localhost:3000 (same machine, default)
# Or: http://your-backend-server:3000 (different machine)
# PUBLIC URL the frontend sees
NEXT_PUBLIC_BACKEND_URL="http://localhost:3000"

# Used by backend for internal services communication
BACKEND_URL="http://localhost:3000"
BACKEND_INTERNAL_URL="http://localhost:3000"

# Optional: Use if you have a different main domain
# MAIN_URL="http://localhost:4200"

# ============================================================================
# Optional: Email Configuration (Resend)
# ============================================================================
# Leave these commented out to disable email verification
# Users will be automatically activated without email confirmation

# Your Resend API key (get from: https://resend.com)
# If not set, email verification is disabled
# RESEND_API_KEY=""

# Email sender address and name
# EMAIL_FROM_ADDRESS="noreply@pozmixal.local"
# EMAIL_FROM_NAME="Pozmixal"

# ============================================================================
# Optional: Storage Configuration
# ============================================================================
# Where to store uploaded files (avatars, media, etc.)

# Storage provider: "local" or "cloudflare"
STORAGE_PROVIDER="local"

# Local storage directory path (if STORAGE_PROVIDER="local")
# UPLOAD_DIRECTORY="/path/to/uploads"

# Public URL for accessing uploaded files
# NEXT_PUBLIC_UPLOAD_STATIC_DIRECTORY="/uploads"

# ============================================================================
# Optional: Analytics & Monitoring (Sentry/PostHog)
# ============================================================================
# Leave these empty to skip analytics

# Sentry (error tracking) - get from: https://sentry.io
# NEXT_PUBLIC_SENTRY_DSN=""

# PostHog (product analytics) - get from: https://posthog.com
# NEXT_PUBLIC_POSTHOG_KEY=""
# NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# ============================================================================
# Optional: Social Media API Keys
# ============================================================================
# Add credentials for social platforms you want to integrate
# Leave empty if not needed initially

# Twitter/X
X_API_KEY=""
X_API_SECRET=""

# LinkedIn
LINKEDIN_CLIENT_ID=""
LINKEDIN_CLIENT_SECRET=""

# Reddit
REDDIT_CLIENT_ID=""
REDDIT_CLIENT_SECRET=""

# GitHub
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# Facebook
FACEBOOK_APP_ID=""
FACEBOOK_APP_SECRET=""

# Instagram (via Facebook Graph)
INSTAGRAM_APP_ID=""
INSTAGRAM_APP_SECRET=""

# Threads
THREADS_APP_ID=""
THREADS_APP_SECRET=""

# YouTube
YOUTUBE_CLIENT_ID=""
YOUTUBE_CLIENT_SECRET=""

# TikTok
TIKTOK_CLIENT_ID=""
TIKTOK_CLIENT_SECRET=""

# Pinterest
PINTEREST_CLIENT_ID=""
PINTEREST_CLIENT_SECRET=""

# Dribbble
DRIBBBLE_CLIENT_ID=""
DRIBBBLE_CLIENT_SECRET=""

# Discord
DISCORD_CLIENT_ID=""
DISCORD_CLIENT_SECRET=""
DISCORD_BOT_TOKEN_ID=""

# Slack
SLACK_ID=""
SLACK_SECRET=""
SLACK_SIGNING_SECRET=""

# Mastodon
MASTODON_URL="https://mastodon.social"
MASTODON_CLIENT_ID=""
MASTODON_CLIENT_SECRET=""

# Bluesky/ATProto
# (credentials go in database)

# ============================================================================
# Optional: Newsletter Services
# ============================================================================

# Beehive
BEEHIIVE_API_KEY=""
BEEHIIVE_PUBLICATION_ID=""

# ============================================================================
# Optional: Payment & Billing (Stripe)
# ============================================================================
# Leave empty to disable billing features

# Stripe publishable key (visible in frontend)
STRIPE_PUBLISHABLE_KEY=""

# Stripe secret key (never expose in frontend)
STRIPE_SECRET_KEY=""

# Stripe webhook signing keys
STRIPE_SIGNING_KEY=""
STRIPE_SIGNING_KEY_CONNECT=""

# Fee percentage for transactions
FEE_AMOUNT=0.05

# ============================================================================
# Optional: Cloudflare Storage (for production use)
# ============================================================================
# For local development, use local storage instead

# CLOUDFLARE_ACCOUNT_ID=""
# CLOUDFLARE_ACCESS_KEY=""
# CLOUDFLARE_SECRET_ACCESS_KEY=""
# CLOUDFLARE_BUCKETNAME=""
# CLOUDFLARE_BUCKET_URL="https://your-bucket-url.r2.cloudflarestorage.com/"
# CLOUDFLARE_REGION="auto"

# ============================================================================
# Optional: AI & Language Models (OpenAI)
# ============================================================================

# OpenAI API key for AI features
OPENAI_API_KEY=""

# ============================================================================
# Optional: Communication & Support
# ============================================================================

# Discord support server URL
NEXT_PUBLIC_DISCORD_SUPPORT=""

# WhatsApp support link
NEXT_PUBLIC_WHATSAPP_SUPPORT=""

# ============================================================================
# Optional: Design Tools (Polotno)
# ============================================================================

# Polotno design tool API key
NEXT_PUBLIC_POLOTNO=""

# ============================================================================
# Optional: Short Link Services
# ============================================================================
# Choose one for URL shortening (or leave all empty for basic links)

# Dub Short Link Service
# DUB_TOKEN=""
# DUB_API_ENDPOINT="https://api.dub.co"
# DUB_SHORT_LINK_DOMAIN="dub.sh"

# Short.io Service
# SHORT_IO_SECRET_KEY=""

# Kutt.it Service
# KUTT_API_KEY=""
# KUTT_API_ENDPOINT="https://kutt.it/api/v2"
# KUTT_SHORT_LINK_DOMAIN="kutt.it"

# LinkDrip Service
# LINK_DRIP_API_KEY=""
# LINK_DRIP_API_ENDPOINT="https://api.linkdrip.com/v1/"
# LINK_DRIP_SHORT_LINK_DOMAIN="dripl.ink"

# ============================================================================
# Optional: Make.com / N8N Integration
# ============================================================================

# Make.com webhook URL for automations
# MAKE_WEBHOOK_URL=""

# N8N integration settings
# N8N_API_URL=""
# N8N_API_KEY=""

# ============================================================================
# Development Settings
# ============================================================================

# Node environment
NODE_ENV="development"

# NX monorepo settings
NX_ADD_PLUGINS=false

# Is this a general installation (vs. self-hosted)
IS_GENERAL="true"

# API rate limit (requests per hour)
API_LIMIT=30

# Disable image compression for debugging
# DISABLE_IMAGE_COMPRESSION=false

# Disable X/Twitter analytics
# DISABLE_X_ANALYTICS=false

# ============================================================================
# Optional: OAuth Configuration (for authentication)
# ============================================================================
# Generic OAuth provider settings (e.g., Authentik, Keycloak)

# OAuth provider display name
NEXT_PUBLIC_POZMIXAL_OAUTH_DISPLAY_NAME="Authentik"

# OAuth provider logo URL
NEXT_PUBLIC_POZMIXAL_OAUTH_LOGO_URL="https://raw.githubusercontent.com/walkxcode/dashboard-icons/master/png/authentik.png"

# Enable generic OAuth
POZMIXAL_GENERIC_OAUTH="false"

# OAuth provider URLs
POZMIXAL_OAUTH_URL="https://auth.example.com"
POZMIXAL_OAUTH_AUTH_URL="https://auth.example.com/application/o/authorize"
POZMIXAL_OAUTH_TOKEN_URL="https://auth.example.com/application/o/token"
POZMIXAL_OAUTH_USERINFO_URL="https://authentik.example.com/application/o/userinfo"

# OAuth client credentials
POZMIXAL_OAUTH_CLIENT_ID=""
POZMIXAL_OAUTH_CLIENT_SECRET=""

# OAuth scopes (optional, defaults to "openid profile email")
# POZMIXAL_OAUTH_SCOPE="openid profile email"

# ============================================================================
# Optional: Farcaster Integration
# ============================================================================

# Neynar Farcaster client ID
NEYNAR_CLIENT_ID=""

# Farcaster bot token
FARCASTER_BOT_TOKEN=""

# ============================================================================
# Advanced: Security & Performance
# ============================================================================

# Allow insecure mode (HTTP without HTTPS) - NEVER use in production
# NOT_SECURED=false

# Disable registration (only first user can be admin)
# DISABLE_REGISTRATION=false

# Disallow email addresses with plus sign (e.g., user+tag@example.com)
# DISALLOW_PLUS=false

# ============================================================================
# Advanced: Custom Domain Settings
# ============================================================================

# Main URL for multi-tenant setup
# MAIN_URL="https://yourdomain.com"

# Telegram bot name for integration
TELEGRAM_BOT_NAME=""

# ============================================================================
# Advanced: Media Processing
# ============================================================================

# Transloadit file processing service
# TRANSLOADIT_AUTH=""
# TRANSLOADIT_TEMPLATE=""

# ============================================================================
# IMPORTANT NOTES
# ============================================================================
#
# 1. FRONTEND_URL MUST match your browser URL exactly
#    - If you get CORS errors, this is likely the issue
#    - Examples:
#      - http://localhost:4200 ✓
#      - http://127.0.0.1:4200 ✓
#      - http://192.168.1.100:4200 ✓
#      - http://pozmixal.local:4200 ✓
#
# 2. NEXT_PUBLIC_BACKEND_URL must be accessible from the frontend
#    - If you get "Failed to fetch", check this URL
#    - http://localhost:3000 for local development ✓
#
# 3. DATABASE_URL must point to a running PostgreSQL database
#    - Format: postgresql://user:password@host:port/database
#    - If you get "Could not establish connection", verify PostgreSQL is running
#
# 4. JWT_SECRET must be kept secret
#    - Never commit to version control
#    - Must be same across all deployments
#    - Generate a strong random string for production
#
# 5. Social media keys are optional
#    - Leave empty if not using those integrations
#    - Can be added later without restarting
#
# 6. Email service is optional
#    - Leave RESEND_API_KEY empty to skip email verification
#    - Users will be auto-activated
#
# 7. Redis is optional in development
#    - If not provided, MockRedis will be used automatically
#    - Set REDIS_URL to enable real Redis
#
# ============================================================================
  
NOT_SECURED=true 
