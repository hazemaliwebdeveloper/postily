# Redis Cluster Configuration for Postiz
# For horizontal scaling and high availability

# Include base Redis configuration
include /usr/local/etc/redis/redis.conf

# Cluster Configuration
cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 15000
cluster-announce-ip 127.0.0.1
cluster-announce-port 6379
cluster-announce-bus-port 16379

# Cluster Failover
cluster-require-full-coverage no
cluster-slave-validity-factor 10
cluster-migration-barrier 1

# Cluster Performance
cluster-allow-reads-when-down no

# Network
bind 0.0.0.0
port 6379

# Persistence for cluster
appendonly yes
appendfilename "appendonly.aof"

# Memory
maxmemory-policy allkeys-lru

# Security (uncomment and set password)
# requirepass your_cluster_password_here
# masterauth your_cluster_password_here

# Logging
loglevel notice
logfile /var/log/redis/cluster.log